<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="BNB Chain Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="BNB Chain Documentation Atom Feed"><title data-react-helmet="true">DIA Data Oracles on BNB Smart Chain | BNB Chain Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://github.com/RumeelHussainbnb/beta_BSC_Docs/docs/dia"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="DIA Data Oracles on BNB Smart Chain | BNB Chain Documentation"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/RumeelHussainbnb/beta_BSC_Docs/docs/dia"><link data-react-helmet="true" rel="alternate" href="https://github.com/RumeelHussainbnb/beta_BSC_Docs/docs/dia" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/RumeelHussainbnb/beta_BSC_Docs/docs/dia" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.caa713d3.css">
<link rel="preload" href="/assets/js/runtime~main.67f32a26.js" as="script">
<link rel="preload" href="/assets/js/main.0f25bb2c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/image.png" alt="BNB" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/image.png" alt="BNB" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">BNB Chain Documentation</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>DIA Data Oracles on BNB Smart Chain</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="introduction">Introduction<a aria-hidden="true" class="hash-link" href="#introduction" title="Direct link to heading">â€‹</a></h2><p>DApp developers who want to leverage DIA oracles can access the published data on BNB Smart Chain. DIA offers cryptocurrency and data about traditional financial assets.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="supported-assets">Supported Assets<a aria-hidden="true" class="hash-link" href="#supported-assets" title="Direct link to heading">â€‹</a></h2><p>DIA supports assets from various categories to be included into the oracle. A selection of assets is listed here:</p><table><thead><tr><th align="center">Data Feed Name</th><th align="center">Data Type</th></tr></thead><tbody><tr><td align="center">Binance Coin</td><td align="center">Crypto Price</td></tr><tr><td align="center">Bitcoin</td><td align="center">Crypto Price</td></tr><tr><td align="center">Ethereum</td><td align="center">Crypto Price</td></tr><tr><td align="center">Tether</td><td align="center">Crypto Price</td></tr><tr><td align="center">XRP</td><td align="center">Crypto price</td></tr><tr><td align="center">Barnbridge Protocol</td><td align="center">Farming Pool Data</td></tr><tr><td align="center">yearn.finance</td><td align="center">Farming Pool Data</td></tr><tr><td align="center">CREX on Crex</td><td align="center">Chart Point on Exchange</td></tr><tr><td align="center">DAI on CurveFi</td><td align="center">Chart Point on Exchange</td></tr><tr><td align="center">WBNB on PancakeSwap</td><td align="center">Chart Point on Exchange</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_y2LR" id="data-access">Data Access<a aria-hidden="true" class="hash-link" href="#data-access" title="Direct link to heading">â€‹</a></h2><p>All asset prices are determined in USD.
Where appliccable, the oracle also provides information on circulating supply and the timestamp of data collection.
The query in the smart contract is realized with the symbol of the asset.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="smart-contract">Smart Contract<a aria-hidden="true" class="hash-link" href="#smart-contract" title="Direct link to heading">â€‹</a></h3><p>DIA data is published in the <code>DIAOracle</code> smart contract. By querying the <code>getCoinInfo()</code> function you can retrieve the requested data.</p><p>It takes the name of the asset as input, e.g., <code>Bitcoin</code> and returns this struct of data:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">struct CoinInfo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 price;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 supply;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 lastUpdateTimestamp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    string symbol;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The following snippet shows how to retrieve the BTC price of an asset (e.g. <code>Binance Coin</code>) using a smart contract.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.4.24;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract DiaOracle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address owner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct CoinInfo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 price;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 supply;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 lastUpdateTimestamp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string symbol;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping(string =&gt; CoinInfo) diaOracles;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    event newCoinInfo(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string name,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string symbol,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 price,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 supply,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 lastUpdateTimestamp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor() public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        owner = msg.sender;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function changeOwner(address newOwner) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(msg.sender == owner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        owner = newOwner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function updateCoinInfo(string name, string symbol, uint256 newPrice, uint256 newSupply, uint256 newTimestamp) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(msg.sender == owner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        diaOracles[name] = (CoinInfo(newPrice, newSupply, newTimestamp, symbol));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit newCoinInfo(name, symbol, newPrice, newSupply, newTimestamp);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function getCoinInfo(string name) public view returns (uint256, uint256, uint256, string) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            diaOracles[name].price,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            diaOracles[name].supply,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            diaOracles[name].lastUpdateTimestamp,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            diaOracles[name].symbol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract DiaAssetBtcOracle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    DiaOracle oracle;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address owner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor() public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        owner = msg.sender;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function setOracleAddress(address _address) public {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(msg.sender == owner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        oracle = DiaOracle(_address);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    function getAssetEurRate(string asset) constant public returns (uint256) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (uint assetPrice,,,) = oracle.getCoinInfo(asset);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        (uint btcPrice,,,) = oracle.getCoinInfo(&quot;Bitcoin&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (assetPrice * 100000 / btcPrice);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="deployed-addresses">Deployed Addresses<a aria-hidden="true" class="hash-link" href="#deployed-addresses" title="Direct link to heading">â€‹</a></h4><table><thead><tr><th align="left">Chain name</th><th align="center">Oracle Contract Address</th><th align="center">Update Frequency</th></tr></thead><tbody><tr><td align="left">BSC: Testnet</td><td align="center"><code>0xf35bEE4B6727D2D1c9167C5fB4D51855D6bB693c</code></td><td align="center">1/day</td></tr><tr><td align="left">BSC: Mainnet</td><td align="center"><code>0xf35bEE4B6727D2D1c9167C5fB4D51855D6bB693c</code></td><td align="center">1/day</td></tr></tbody></table><p>The full documentation of the DIA oracle is located <a href="https://docs.diadata.org/documentation/oracle-documentation" target="_blank" rel="noopener noreferrer">here</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/RumeelHussainbnb/beta_BSC_Docs/docs/dia.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#supported-assets" class="table-of-contents__link toc-highlight">Supported Assets</a></li><li><a href="#data-access" class="table-of-contents__link toc-highlight">Data Access</a><ul><li><a href="#smart-contract" class="table-of-contents__link toc-highlight">Smart Contract</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/bnbIntro">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://www.buildnbuild.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>BuildnBuild Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.bnbchain.org/en/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/bnb-chain" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discord.com/invite/bnbchain" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/BNBCHAIN" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="http://t.me/BinanceDEXchange" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Build N Build.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.67f32a26.js"></script>
<script src="/assets/js/main.0f25bb2c.js"></script>
</body>
</html>